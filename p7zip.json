/*
 * SPDX-License-Identifier: FSFAP
 * Copyright (C) 2020 Colin B. Macdonald
 *
 * Copying and distribution of this file, with or without modification,
 * are permitted in any medium without royalty provided the copyright
 * notice and this notice are preserved.  This file is offered as-is,
 * without any warranty.
 *
 * Fedora's p7zip.spec was used for reference.
 * Only build the standalone 7za: c++, no messing with arch
 */
{
    "name": "p7zip",
    "buildsystem": "simple",
    "build-commands": [
        "cd CPP/7zip/CMAKE/ && sh ./generate.sh",
        "cd CPP/7zip/P7ZIP.Unix && make -j $FLATPAK_N_PROCS 7za",
        "mkdir /app/bin",
        "install -Dm755 CPP/7zip/P7ZIP.Unix/bin/7za /app/bin/"
    ],
    "sources": [
        {
            "type": "archive",
            "url": "https://sourceforge.net/projects/p7zip/files/p7zip/16.02/p7zip_16.02_src_all.tar.bz2",
            "sha256": "5eb20ac0e2944f6cb9c2d51dd6c4518941c185347d4089ea89087ffdd6e2341f"
        },
        {
            "type": "patch",
            "path": "p7zip-gcc10-conversion.patch"
        }
    ]
}
